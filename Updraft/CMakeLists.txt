PROJECT(updraft)
FIND_PACKAGE(Qt4 REQUIRED)

cmake_minimum_required(VERSION 2.8)

SET(QT_USE_QTOPENGL TRUE)

FILE(GLOB_RECURSE CORE_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/src/core/*.cpp)
FILE(GLOB_RECURSE CORE_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/src/core/*.h)
FILE(GLOB         PLUGINAPI_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/src/*.h)
FILE(GLOB_RECURSE CORE_FORMS
	${CMAKE_CURRENT_SOURCE_DIR}/src/core/*.ui)
FILE(GLOB_RECURSE CORE_RESOURCES
	${CMAKE_CURRENT_SOURCE_DIR}/src/core/*.qrc)

SET(LANG
	translations/czech.ts
)

QT4_WRAP_CPP(CORE_HEADERS_MOC ${CORE_HEADERS})
QT4_WRAP_UI(CORE_FORMS_HEADERS ${CORE_FORMS})
QT4_ADD_RESOURCES(CORE_RESOURCES_RCC ${CORE_RESOURCES})
QT4_ADD_TRANSLATION(TRANSLATIONS ${LANG})

INCLUDE(${QT_USE_FILE})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/src/)
ADD_DEFINITIONS(${QT_DEFINITIONS})

ADD_CUSTOM_TARGET(style-check ALL python
	${CMAKE_SOURCE_DIR}/scripts/cpplint.py ${CORE_SOURCES} ${CORE_HEADERS})

ADD_EXECUTABLE(updraft ${CORE_SOURCES} 
	${CORE_HEADERS_MOC} 
	${CORE_FORMS_HEADERS}
	${CORE_RESOURCES_RCC}
	${TRANSLATIONS})

TARGET_LINK_LIBRARIES(updraft ${QT_LIBRARIES})

